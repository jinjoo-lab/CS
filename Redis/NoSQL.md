# NoSQL

## Software Architecture

---

### 모놀리식 아키텍처

> 전통적인 소프트웨어 개발 모델, 전체 애플리케이션을 **하나의 통합된 패키지**로 **개발, 배포**하는 방식
>
- 모든 시스템은 하나로 연결되어 관리된다. (단일 지점)

![Untitled](NoSQL%205467901549314002b6c3e0bcc9085069/Untitled.png)

### 장점

- 단순성
- 쉬운 테스트 , 모니터링
    - 단일 애플리케이션 형태로서 오류 발생 위치의 식별이 쉽다.

### 단점

- 유연하지 않은 **확장성**
    - 특정 부분만 확장할 수 없고 전체 애플리케이션을 확장해야 하므로 리소스 낭비로 이어질 수 있다.
- **유지보수**가 어려움
    - 하나의 모듈 수정 시 전체 **애플리케이션을 다시 배포**
    - 대량 트래픽 , 복잡한 트랜잭션의 요구 사항에 유연한 대처가 어려움

### 마이크로서비스 아키텍처

> 독립된 각각의 모듈로 조립해 하나의 서비스를 만드는 아키텍처
>
- 기능별로 **작게 나눠진 서비스**가 **독립적으로 동작**하는 서비스
- 업데이트, 테스트 , 배포, 확장은 각 서비스별로 독립적으로 수행될 수 있다.

![Untitled](NoSQL%205467901549314002b6c3e0bcc9085069/Untitled%201.png)

### 장점

- **유연한 확장성**
    - 각 마이크로 서비스는 다른 서비스와 독립적으로 확장 가능
    - 새로운 기능을 추가해 배포하는 것도 편리
- **단일 실패 지점 제거**
    - 애플리케이션을 여러 소규모 서비스로 분할하여, 전체에 영향을 미치는 단일 실패 지점 제거
- 기술 선택의 자유로움
    - 각 마이크로 서비스별로 기술 선택으로 다르게 할 수 있다.

### 단점

- 서비스 분리로 인한 관리 복잡도 + 운영 부담
- 마이크로서비스 간 통신

[모놀리식 vs 마이크로서비스, 어떤 아키텍처를 선택할까? | 요즘IT](https://yozm.wishket.com/magazine/detail/1813/)

## RDBMS → NoSQL

---

### 모놀리식 : RDB

> 전통적인 모놀리식 아키텍처에서는 **관계형 데이터베이스**를 많이 사용하였다.
>
- 고정된 스키마를 가지고 있다.
    - 행과 열로 구성된 테이블에 데이터를 저장 + 테이블 간의 **관계가 명확**
- Why RDBMS ?

> 모놀리식 아키텍처에서 사용하는 **모든 데이터를 하나의 데이터베이스에서 관리**하고자 함.
하나의 데이터베이스에서 관리하기 위해 **데이터 간의 관계를 정의하고 관리**하는 것이 서비스 운영에 핵심적!
중앙 집약적인 관계형 데이터베이스는 모놀리식 아키텍처에 어울리는 방법이었다.
>

### 변화하는 트렌드

1. 최근 서비스에는 정해진 형태가 없고 크기와 구조를 정의내릴 수 없는 **비정형 데이터**가 증가
    - 비정형 데이터는 다차원적일수 있고 깊은 계층 구조를 가지고 있다.
    - 비정형 데이터를 관계형 데이터베이스의 **테이블 구조로 변환**하는 작업에서 추가 비용 발생
        - 그래프 데이터 → 테이블 구조 정의
        - 실시간 데이터 → 쓰기 성능 이슈 발생

   > 자유롭고 다양한 구조를 가지는 NoSQL
>
2. 테이블 구조 변경
    - 서비스가 확장하는 경우 데이터 베이스의 구조가 변경될 수 있다. 테이블 구조의 변경이 어려운 관계형 데이터베이스는 이런 상황에서 좋은 선택이 아닐 수 있다.

   > 데이터 구조의 변경이 쉽다.
>

## NoSQL

> Not Only SQL , 테이블의 데이터를 쿼리하기 위한 **SQL을 사용하지 않는 데이터 저장소**
>
- 관계가 정의되어 있지 않은 데이터를 저장한다.

### NoSQL 주요 특징

- Schema-less (정해진 구조가 없다)
- JOIN 연산의 부재와 반정규화된 데이터 저장 방식
- 트랜잭션 특성이 RDB와 다름
- ACID 특성에 자유롭기에 수평 확장(샤딩)위 용이하다.

### ACID vs BASE

- BASE는 일반적으로 관계형 데이터베이스에서 따르는 트랜잭션 특성(ACID)과 반대되는 특성을 가지는 NoSQL 시스템에서 주로 따른다
    - **Basically Available** → 기본적으로 가용성을 제공
    - **Soft State** → 유연한 상태를 가진다
    - **Eventually Consistency** → 최종적 일관성을 가진다

### 세부 특징

- **고성능**

> 데이터 양이나 트래픽이 증가할 때 적은 시간의 응답 시간을 보장할 수 있다. 단 데이터 베이스간의 관계가 복잡하지 않을 경우이다.
>
- **유연성**

> 구조화되지 않는 데이터, 즉 비정형 데이터를 자유로운 형식으로 저장할 수 있다.
>
- **확장성**

> RDB에 비해 **수평적 확장에서 이점**을 가지고 있다. 스키마 리스, 구조에 억제되지 않기 때문에 수평적 확장에서 이점을 가지고 있다.
>
- **단순성**

> 서비스가 세분화될수록 관리 포인트는 늘어난다. 이에 따라 데이터베이스를 간단하게 사용하고 싶을 때 NoSQL은 좋은 선택이 될 수 있다.
>

### **RDB vs NoSQL 비교 테이블**

|  | NoSQL | RDB |
| --- | --- | --- |
| 장점 | Scale Out 용이, 상대적으로 빠른 성능 | JOIN 연산, 트랜잭션 보장, 정규화를 통한 데이터 중복 감소 |
| 단점 | 트랜잭션 제약X, 반정규화에 따른 중복데이터 증가 | ScaleOut 어려움, 상대적으로 느린 성능 |

## NoSQL 유형

---

### Graph

- 엔티티간의 관계를 효율적으로 저장하도록 설계 (관계 중심 모델)
- 노드, 에지, 속성으로 데이터를 정의
    - 시작 노드 , 끝 노드 , **유형과 방향**을 가지며 **상-하위 관계 , 동작 , 소유자**등의 정보를 저장

### Column

- 테이블을 Row 기반이 아닌 Column 기반으로 저장

> 대량 데이터에 대한 집계 쿼리가 빠르게 처리 가능 (분석)
>

### Document

- JSON 형태로 데이터가 저장
    - 프로그램 코드와 동일한 형태로 저장 → 효율적이고 직관적
- 정해진 스키마가 없음 (유연성이 크다)
    - 모든 Value는 Key와 연결되는 계층적 트리 구조

> 데이터 저장이나 검색에 특화
>

### Key - Value

- 단순하고 빠른 구조
    - 데이터의 저장이 간단하다. (수평적 확장이 쉬움)
    - 구조의 단순성으로 **빠른 데이터 액세스**와 **처리 속도 보장**
